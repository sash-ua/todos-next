<main class="wrapper wrapper__main" (keyup.escape)="rmPrevComp()">
    <overlay-cmpnnt *ngIf="store.manager().overlayOn"
                    [@overlay]="true"
                    [performData]="{overlayOn: false, isVisible: false, addAuth: false}"
                    (rmDAData)="rmPrevComp()"
                    class="overlay"></overlay-cmpnnt>
    <div>
        <div class="wrapper__adds wrapper__adds_list">
            <button md-mini-fab
                    (click)="addDispatcher({cnfg: this.store.manager().LIST_CNFG, action: {listID: undefined}});"
                    title="Add list">
                <md-icon>add</md-icon>
            </button>
        </div>
        <div class="wrapper__adds wrapper__adds_emb-cmpnnt">
            <list-form-component *ngIf="store.manager().addItem.addListVisible "></list-form-component>
        </div>
        <div class="wrapper__adds"></div>
    </div>
    <div class="wrapper lists__list"
         *ngFor="let list of store.manager().data; let idx=index; trackBy: trackByList;">
        <ng-template #addDACmpnnt ></ng-template>
        <ng-template #editListDACmpnnt ></ng-template>
        <div>
            <div class="wrapper__adds"></div>
            <div class="wrapper__adds">
                <button md-mini-fab
                        [id]="idx"
                        (click)="addDispatcher({cnfg: this.store.manager().TASK_CNFG, action: {listID: list.id}})"
                        color="primary" title="Add task">
                    <md-icon>add</md-icon>
                </button>
            </div>
        </div>
        <div class="lists wrapper wrapper__list mat-divider">
            <ul class="lists list__parent">
                <li># {{idx + 1}}</li>
                <li>List Name: {{list.name}}</li>
                <li>Description: {{list.description}}</li>
            </ul>
            <action-cmpnnt (editItem)="editDispatcher($event)"
                           [actionList]="{priority: list.priority, listID: idx}"
                            class="lists list__parent"></action-cmpnnt>
        </div>
        <div class="wrapper wrapper__task">
            <div *ngFor="let task of store.manager().data[idx].tasks; let indx = index; trackBy: trackByTodo">
                <ng-template #editDACmpnnt></ng-template>
                <ul>
                    <li>{{task.description}}</li>
                    <li>Started task {{task.start | date}}</li>
                    <li>Should be finished to {{task.end | date}}</li>
                </ul>
                <action-cmpnnt (editItem)="editDispatcher($event)"
                               [actionList]="{priority: task.priority, listID: idx, taskID: indx}">
                </action-cmpnnt>
            </div>
        </div>
    </div>
</main>
